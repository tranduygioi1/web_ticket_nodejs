

<div style="display: flex; justify-content: space-between; align-items: center; margin-top: 10px;">
  <h1>{{titlePage}}</h1>

  <div class="d-flex align-items-center">
    <label for="bookingFilter" class="form-label me-2 mb-0">L·ªçc tr·∫°ng th√°i v√©:</label>
    <select id="bookingFilter" class="form-select" onchange="handleFilterChange(this)">
      <option value="">-- Ch·ªçn tr·∫°ng th√°i --</option>
      <option value="/admin/booking_management">üìã Qu·∫£n l√Ω t·∫•t c·∫£ v√©</option>
      <option value="/admin/booking_management/success">‚úîÔ∏è V√© ƒë·∫∑t th√†nh c√¥ng</option>
      <option value="/admin/booking_management/pending">‚è≥ V√© ƒëang ch·ªù h·ªßy</option>
      <option value="/admin/booking_management/canceled">‚ùå V√© ƒë√£ h·ªßy</option>
    </select>
  </div>
</div>

<table class="table table-bordered table-hover mt-3">
  <thead class="table-dark">
    <tr>
      <th style="width: 50px;">#</th>
      <th style="width: 200px;">H·ªç t√™n</th>
      <th>Email</th>
      <th>SƒêT</th>
      <th style="width: 250px;">S·ª± ki·ªán</th>
      <th style="width: 300px;">Chi ti·∫øt v√©</th>
      <th style="width: 200px;">T·ªïng ti·ªÅn</th>
      <th style="width: 100px;">HELP</th> <!-- th√™m c·ªôt tr·∫°ng th√°i -->
    </tr>
  </thead>
  <tbody>
    {{#each allBooking}}
    <tr>
      <td>#{{bookingCode}}</td>       
      <td>{{this.fullName}}</td>
      <td>{{this.email}}</td>
      <td>{{this.phone}}</td>
      <td>{{this.eventName}}</td>
      <td>
        <ul>
          {{#each this.tickets}}
            <li>
              {{this.type}} <br>
              S·ªë l∆∞·ª£ng: {{this.quantity}} <br>
              Gi√°: {{formatNumber this.price}} <br>
              T·∫°m t√≠nh: {{formatNumber this.total}}
              <hr>
            </li>
          {{/each}}
        </ul>
      </td>
      <td><strong>{{formatNumber this.totalAmount}} VND</strong></td>

      <!-- C·ªôt tr·∫°ng th√°i -->
      <td>
        {{#if this.isCanceled}}
          <span class="text-danger">ƒê√£ h·ªßy</span>
        {{else if this.cancelRequest}}
          <form action="/admin/booking_management/confirm-cancel/{{this._id}}" method="POST">
            <button class="btn btn-sm btn-warning">Duy·ªát h·ªßy</button>
          </form>
        {{else}}
          <span class="text-success">ƒê√£ ƒë·∫∑t</span>
        {{/if}}
      </td>
    </tr>
    {{/each}}
  </tbody>
</table>


<script>
  function handleFilterChange(select) {
    const value = select.value;
    if (value) {
      window.location.href = value;
    }
  }
</script>
